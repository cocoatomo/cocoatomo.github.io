



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.1">
    
    
      
        <title>Basic Usage - Poetry documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.3020aac5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Poetry documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Poetry documentation
            </span>
            <span class="md-header-nav__topic">
              Basic Usage
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Poetry documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Poetry documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Basic Usage
      </label>
    
    <a href="./" title="Basic Usage" class="md-nav__link md-nav__link--active">
      Basic Usage
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="プロジェクトのセットアップ" class="md-nav__link">
    プロジェクトのセットアップ
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="依存関係の指定" class="md-nav__link">
    依存関係の指定
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-constraints" title="Version constraints" class="md-nav__link">
    Version constraints
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-dependencies" title="Installing dependencies" class="md-nav__link">
    Installing dependencies
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-without-poetrylock" title="Installing without poetry.lock" class="md-nav__link">
    Installing without poetry.lock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-with-poetrylock" title="Installing with poetry.lock" class="md-nav__link">
    Installing with poetry.lock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-your-poetrylock-file-to-version-control" title="Commit your poetry.lock file to version control" class="md-nav__link">
    Commit your poetry.lock file to version control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-dependencies-to-their-latest-versions" title="Updating dependencies to their latest versions" class="md-nav__link">
    Updating dependencies to their latest versions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#poetry-and-virtualenvs" title="Poetry and virtualenvs" class="md-nav__link">
    Poetry and virtualenvs
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../libraries/" title="Libraries" class="md-nav__link">
      Libraries
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../cli/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../configuration/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../repositories/" title="Repositories" class="md-nav__link">
      Repositories
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../versions/" title="Versions" class="md-nav__link">
      Versions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../pyproject/" title="The pyproject.toml file" class="md-nav__link">
      The pyproject.toml file
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="プロジェクトのセットアップ" class="md-nav__link">
    プロジェクトのセットアップ
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="依存関係の指定" class="md-nav__link">
    依存関係の指定
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#version-constraints" title="Version constraints" class="md-nav__link">
    Version constraints
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-dependencies" title="Installing dependencies" class="md-nav__link">
    Installing dependencies
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-without-poetrylock" title="Installing without poetry.lock" class="md-nav__link">
    Installing without poetry.lock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-with-poetrylock" title="Installing with poetry.lock" class="md-nav__link">
    Installing with poetry.lock
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-your-poetrylock-file-to-version-control" title="Commit your poetry.lock file to version control" class="md-nav__link">
    Commit your poetry.lock file to version control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-dependencies-to-their-latest-versions" title="Updating dependencies to their latest versions" class="md-nav__link">
    Updating dependencies to their latest versions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#poetry-and-virtualenvs" title="Poetry and virtualenvs" class="md-nav__link">
    Poetry and virtualenvs
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="_1">基本的な使い方<a class="headerlink" href="#_1" title="Permanent link"></a></h1>
<p>基本的な使い方の入門として、 <code>pendulum</code> という日付ライブラリをインストールします。
Poetryをまだインストールしていない場合は、 <a href="/docs/">Introduction</a> の章を参照してください。</p>
<h2 id="_2">プロジェクトのセットアップ<a class="headerlink" href="#_2" title="Permanent link"></a></h2>
<p>最初に、新しいプロジェクトを作成し、 <code>poetry-demo</code> と名付けましょう:</p>
<div class="codehilite"><pre><span></span>poetry new poetry-demo
</pre></div>

<p>This will create the <code>poetry-demo</code> directory with the following content:</p>
<div class="codehilite"><pre><span></span>poetry-demo
├── pyproject.toml
├── README.rst
├── poetry_demo
│   └── __init__.py
└── tests
    ├── __init__.py
    └── test_poetry_demo.py
</pre></div>

<p>The <code>pyproject.toml</code> file is what is the most important here. This will
orchestrate your project and its dependencies. For now, it looks like this:</p>
<div class="codehilite"><pre><span></span><span class="k">[tool.poetry]</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">&quot;poetry-demo&quot;</span>
<span class="na">version</span> <span class="o">=</span> <span class="s">&quot;0.1.0&quot;</span>
<span class="na">description</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="na">authors</span> <span class="o">=</span> <span class="s">[&quot;Sébastien Eustace &lt;sebastien@eustace.io&gt;&quot;]</span>

<span class="k">[tool.poetry.dependencies]</span>
<span class="na">python</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span>

<span class="k">[tool.poetry.dev-dependencies]</span>
<span class="na">pytest</span> <span class="o">=</span> <span class="s">&quot;^3.4&quot;</span>
</pre></div>

<h3 id="_3">依存関係の指定<a class="headerlink" href="#_3" title="Permanent link"></a></h3>
<p>If you want to add dependencies to your project, you can specify them in the
<code>tool.poetry.dependencies</code> section.</p>
<div class="codehilite"><pre><span></span><span class="k">[tool.poetry.dependencies]</span>
<span class="na">pendulum</span> <span class="o">=</span> <span class="s">&quot;^1.4&quot;</span>
</pre></div>

<p>As you can see, it takes a mapping of <strong>package names</strong> and <strong>version
constraints</strong>.</p>
<p>Poetry uses this information to search for the right set of files in package
"repositories" that you register in the <code>tool.poetry.repositories</code> section,
or on <a href="https://pypi.org">PyPI</a> by default.</p>
<p>Also, instead of modifying the <code>pyproject.toml</code> file by hand, you can use
the <code>add</code> command.</p>
<div class="codehilite"><pre><span></span>$ poetry add pendulum
</pre></div>

<p>It will automatically find a suitable version constraint <strong>and install</strong> the
package and subdependencies.</p>
<h3 id="version-constraints">Version constraints<a class="headerlink" href="#version-constraints" title="Permanent link"></a></h3>
<p>In our example, we are requesting the <code>pendulum</code> package with the version constraint <code>^1.4</code>.
This means any version greater or equal to 1.4.0 and less than 2.0.0 (<code>&gt;=1.4.0 &lt;2.0.0</code>).</p>
<p>Please read <a href="/docs/versions/">versions</a> for more in-depth information on
versions, how versions relate to each other, and on version constraints.</p>
<div class="admonition 注意">
<p class="admonition-title">注意</p>
<p><strong>How does Poetry download the right files?</strong></p>
<p>When you specify a dependency in <code>pyproject.toml</code>, Poetry first take the name of the package
that you have requested and searches for it in any repository you have registered using the <code>repositories</code> key.
If you have not registered any extra repositories, or it does not find a package with that name in the
repositories you have specified, it falls back on PyPI.</p>
<p>When Poetry finds the right package, it then attempts to find the best match
for the version constraint you have specified.</p>
</div>
<h2 id="installing-dependencies">Installing dependencies<a class="headerlink" href="#installing-dependencies" title="Permanent link"></a></h2>
<p>To install the defined dependencies for your project, just run the <code>install</code>
command.</p>
<div class="codehilite"><pre><span></span>poetry install
</pre></div>

<p>When you run this command, one of two things may happen:</p>
<h3 id="installing-without-poetrylock">Installing without <code>poetry.lock</code><a class="headerlink" href="#installing-without-poetrylock" title="Permanent link"></a></h3>
<p>If you have never run the command before and there is also no <code>poetry.lock</code>
file present, Poetry simply resolves all dependencies listed in your
<code>pyproject.toml</code> file and downloads the latest version of their files.</p>
<p>When Poetry has finished installing, it writes all of the packages and the
exact versions of them that it downloaded to the <code>poetry.lock</code> file, locking
the project to those specific versions.  You should commit the <code>poetry.lock</code>
file to your project repo so that all people working on the project are
locked to the same versions of dependencies (more below).</p>
<h3 id="installing-with-poetrylock">Installing with <code>poetry.lock</code><a class="headerlink" href="#installing-with-poetrylock" title="Permanent link"></a></h3>
<p>This brings us to the second scenario. If there is already a <code>poetry.lock</code>
file as well as a <code>pyproject.toml</code> file when you run <code>poetry install</code>, it
means either you ran the <code>install</code> command before, or someone else on the
project ran the <code>install</code> command and committed the <code>poetry.lock</code> file to
the project (which is good).</p>
<p>Either way, running <code>install</code> when a <code>poetry.lock</code> file is present resolves
and installs all dependencies that you listed in <code>pyproject.toml</code>, but
Poetry uses the exact versions listed in <code>poetry.lock</code> to ensure that the
package versions are consistent for everyone working on your project.  As a
result you will have all dependencies requested by your <code>pyproject.toml</code>
file, but they may not all be at the very latest available versions (some of
the dependencies listed in the <code>poetry.lock</code> file may have released newer
versions since the file was created).  This is by design, it ensures that
your project does not break because of unexpected changes in dependencies.</p>
<h3 id="commit-your-poetrylock-file-to-version-control">Commit your <code>poetry.lock</code> file to version control<a class="headerlink" href="#commit-your-poetrylock-file-to-version-control" title="Permanent link"></a></h3>
<p>Committing this file to VC is important because it will cause anyone who
sets up the project to use the exact same versions of the dependencies that
you are using.  Your CI server, production machines, other developers in
your team, everything and everyone runs on the same dependencies, which
mitigates the potential for bugs affecting only some parts of the
deployments.  Even if you develop alone, in six months when reinstalling the
project you can feel confident the dependencies installed are still working
even if your dependencies released many new versions since then.  (See note
below about using the update command.)</p>
<div class="admonition 注意">
<p class="admonition-title">注意</p>
<p>For libraries it is not necessary to commit the lock file.</p>
</div>
<h2 id="updating-dependencies-to-their-latest-versions">Updating dependencies to their latest versions<a class="headerlink" href="#updating-dependencies-to-their-latest-versions" title="Permanent link"></a></h2>
<p>As mentioned above, the <code>poetry.lock</code> file prevents you from automatically
getting the latest versions of your dependencies.  To update to the latest
versions, use the <code>update</code> command.  This will fetch the latest matching
versions (according to your <code>pyproject.toml</code> file)  and update the lock file
with the new versions.  (This is equivalent to deleting the <code>poetry.lock</code>
file and running <code>install</code> again.)</p>
<div class="admonition 注意">
<p class="admonition-title">注意</p>
<p>Poetry will display a <strong>Warning</strong> when executing an install command if <code>poetry.lock</code> and <code>pyproject.toml</code>
are not synchronized.</p>
</div>
<h2 id="poetry-and-virtualenvs">Poetry and virtualenvs<a class="headerlink" href="#poetry-and-virtualenvs" title="Permanent link"></a></h2>
<p>When you execute the <code>install</code> command (or any other "install" commands like
<code>add</code> or <code>remove</code>), Poetry will check if it's currently inside a virtualenv
and, if not, will use an existing one or create a brand new one for you to
always work isolated from your global Python installation.</p>
<div class="admonition 注意">
<p class="admonition-title">注意</p>
<p>To create the virtualenv for the current project, Poetry will use
the currently activated Python version.</p>
<p>To easily switch between Python versions, it is recommended to
use <a href="https://github.com/pyenv/pyenv">pyenv</a> or similar tools.</p>
<p>For instance, if your project is Python 2.7 only, a standard workflow
would be:</p>
<div class="codehilite"><pre><span></span>pyenv install <span class="m">2</span>.7.15
pyenv <span class="nb">local</span> <span class="m">2</span>.7.15  <span class="c1"># Activate Python 2.7 for the current project</span>
poetry install
</pre></div>

</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="../libraries/" title="Libraries" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Libraries
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.dc02f8ce.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>